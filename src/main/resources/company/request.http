@server = http://localhost:8080

### â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
### ğŸ“– COMPANY MODULE E2E STORY
### â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
###
### BUSINESS SCENARIO:
### Three companies enter the TMS ecosystem:
###   â€¢ Shoppe (marketplace) needs logistics providers
###   â€¢ Loggi (logistics provider) serves multiple clients
###   â€¢ Biquelo (seller) ships through logistics providers
###
### COMPLETE STORY:
###   1. Company CRUD: Create companies, query, update, delete
###   2. Agreements: Shoppe â†’ Loggi, Biquelo â†’ Loggi
###   3. Queries: List agreements, get by ID
###   4. Updates: Extend validity periods
###   5. Cleanup: Remove agreements
###   6. Negative cases: Validations and business rules
###
### â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”


### â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
### ğŸ¢ PART 1: COMPANY CRUD OPERATIONS
### â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

### â”â”â” STEP 1: CREATE SHOPPE (MARKETPLACE) â”â”â”
POST {{server}}/companies
Content-Type: application/json
Accept: application/json

{
  "name": "Shoppe",
  "cnpj": "42.123.456/0001-78",
  "types": ["MARKETPLACE"],
  "configuration": {
    "notification": "true",
    "webhook": "https://api.shoppe.com.br/webhooks/tms"
  }
}

> {% client.global.set("shoppeId", response.body.companyId) %}


### â”â”â” STEP 2: CREATE LOGGI (LOGISTICS PROVIDER) â”â”â”
POST {{server}}/companies
Content-Type: application/json
Accept: application/json

{
  "name": "Loggi",
  "cnpj": "13.895.286/0001-96",
  "types": ["LOGISTICS_PROVIDER"],
  "configuration": {
    "notification": "true",
    "webhook": "https://api.loggi.com/webhooks/partners",
    "coverage": "nationwide"
  }
}

> {% client.global.set("loggiId", response.body.companyId) %}


### â”â”â” STEP 3: CREATE BIQUELO (SELLER) â”â”â”
POST {{server}}/companies
Content-Type: application/json
Accept: application/json

{
  "name": "Biquelo ComÃ©rcio EletrÃ´nico",
  "cnpj": "28.765.432/0001-91",
  "types": ["SELLER"],
  "configuration": {
    "notification": "true",
    "webhook": "https://biquelo.com.br/api/logistics/callback",
    "shippingRegions": ["SP", "RJ", "MG"]
  }
}

> {% client.global.set("biqueloId", response.body.companyId) %}


### â”â”â” STEP 4: GET SHOPPE BY ID â”â”â”
GET {{server}}/companies/{{shoppeId}}
Accept: application/json


### â”â”â” STEP 5: GET SHOPPE (CLI PRESENTER) â”â”â”
GET {{server}}/companies/{{shoppeId}}
Accept: application/json
cli: true


### â”â”â” STEP 6: GET SHOPPE (MOBILE PRESENTER) â”â”â”
GET {{server}}/companies/{{shoppeId}}
Accept: application/json
mobile: true


### â”â”â” STEP 7: UPDATE SHOPPE â€” ADD SELLER TYPE â”â”â”
PUT {{server}}/companies/{{shoppeId}}
Content-Type: application/json
Accept: application/json

{
  "name": "Shoppe Brasil",
  "cnpj": "42.123.456/0001-78",
  "types": ["MARKETPLACE", "SELLER"],
  "configuration": {
    "notification": "false",
    "webhook": "https://api.shoppe.com.br/webhooks/tms",
    "directShipping": "enabled"
  }
}


### â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
### ï¿½ï¿½ PART 2: AGREEMENT OPERATIONS
### â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

### â”â”â” STEP 8: CREATE AGREEMENT â€” SHOPPE â†’ LOGGI (10% DISCOUNT) â”â”â”
POST {{server}}/companies/{{shoppeId}}/agreements
Content-Type: application/json
Accept: application/json

{
  "destinationCompanyId": "{{loggiId}}",
  "type": "DELIVERS_WITH",
  "configuration": {
    "contractNumber": "AGR-2026-001",
    "note": "Bulk discount for marketplace volume"
  },
  "conditions": [],
  "validFrom": "2026-02-24T00:00:00Z",
  "validTo": "2026-12-31T23:59:59Z"
}

> {% client.global.set("shoppeLoggiAgreementId", response.body.agreementId) %}


### â”â”â” STEP 9: CREATE AGREEMENT â€” BIQUELO â†’ LOGGI (30% DISCOUNT + SLA) â”â”â”
POST {{server}}/companies/{{biqueloId}}/agreements
Content-Type: application/json
Accept: application/json

{
  "destinationCompanyId": "{{loggiId}}",
  "type": "DELIVERS_WITH",
  "configuration": {
    "contractNumber": "AGR-2026-002",
    "note": "Premium terms - 30% discount + Day+1 SLA"
  },
  "conditions": [],
  "validFrom": "2026-02-24T00:00:00Z",
  "validTo": "2027-02-23T23:59:59Z"
}

> {% client.global.set("biqueloLoggiAgreementId", response.body.agreementId) %}


### â”â”â” STEP 10: LIST SHOPPE'S AGREEMENTS â”â”â”
GET {{server}}/companies/{{shoppeId}}/agreements
Accept: application/json


### â”â”â” STEP 11: LIST LOGGI'S AGREEMENTS â”â”â”
GET {{server}}/companies/{{loggiId}}/agreements
Accept: application/json


### â”â”â” STEP 12: GET SHOPPE â†’ LOGGI AGREEMENT BY ID â”â”â”
GET {{server}}/companies/{{shoppeId}}/agreements/{{shoppeLoggiAgreementId}}
Accept: application/json


### â”â”â” STEP 13: UPDATE SHOPPE â†’ LOGGI â€” EXTEND VALIDITY â”â”â”
PUT {{server}}/companies/{{shoppeId}}/agreements/{{shoppeLoggiAgreementId}}
Content-Type: application/json
Accept: application/json

{
  "validTo": "2027-12-31T23:59:59Z"
}


### â”â”â” STEP 14: EXTEND BIQUELO â†’ LOGGI VALIDITY â”â”â”
PUT {{server}}/companies/{{biqueloId}}/agreements/{{biqueloLoggiAgreementId}}
Content-Type: application/json
Accept: application/json

{
  "validTo": "2028-02-23T23:59:59Z"
}


### â”â”â” STEP 15: REMOVE SHOPPE â†’ LOGGI AGREEMENT â”â”â”
DELETE {{server}}/companies/{{shoppeId}}/agreements/{{shoppeLoggiAgreementId}}
Accept: application/json


### â”â”â” STEP 16: VERIFY SHOPPE AGREEMENTS (SHOULD BE EMPTY) â”â”â”
GET {{server}}/companies/{{shoppeId}}/agreements
Accept: application/json


### â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
### âŒ PART 3: NEGATIVE TEST SCENARIOS
### â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

### â”â”â” NEGATIVE 1: DUPLICATE CNPJ (SHOULD FAIL) â”â”â”
POST {{server}}/companies
Content-Type: application/json
Accept: application/json

{
  "name": "Shoppe Clone",
  "cnpj": "42.123.456/0001-78",
  "types": ["MARKETPLACE"],
  "configuration": {}
}


### â”â”â” NEGATIVE 2: DUPLICATE AGREEMENT (SHOULD FAIL) â”â”â”
POST {{server}}/companies/{{biqueloId}}/agreements
Content-Type: application/json
Accept: application/json

{
  "destinationCompanyId": "{{loggiId}}",
  "type": "DELIVERS_WITH",
  "configuration": {},
  "conditions": [],
  "validFrom": "2026-02-24T00:00:00Z",
  "validTo": "2027-02-23T23:59:59Z"
}


### â”â”â” NEGATIVE 3: SELF-REFERENCE AGREEMENT (SHOULD FAIL) â”â”â”
POST {{server}}/companies/{{biqueloId}}/agreements
Content-Type: application/json
Accept: application/json

{
  "destinationCompanyId": "{{biqueloId}}",
  "type": "DELIVERS_WITH",
  "configuration": {},
  "conditions": [],
  "validFrom": "2026-02-24T00:00:00Z",
  "validTo": "2026-12-31T23:59:59Z"
}


### â”â”â” NEGATIVE 4: EXPIRED AGREEMENT (SHOULD FAIL) â”â”â”
POST {{server}}/companies/{{shoppeId}}/agreements
Content-Type: application/json
Accept: application/json

{
  "destinationCompanyId": "{{loggiId}}",
  "type": "DELIVERS_WITH",
  "configuration": {},
  "conditions": [],
  "validFrom": "2026-12-31T00:00:00Z",
  "validTo": "2026-01-01T23:59:59Z"
}


### â”â”â” NEGATIVE 5: MISSING TARGET COMPANY (SHOULD FAIL) â”â”â”
POST {{server}}/companies/{{shoppeId}}/agreements
Content-Type: application/json
Accept: application/json

{
  "destinationCompanyId": "00000000-0000-0000-0000-000000000000",
  "type": "DELIVERS_WITH",
  "configuration": {},
  "conditions": [],
  "validFrom": "2026-02-24T00:00:00Z",
  "validTo": "2026-12-31T23:59:59Z"
}


### â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
### ğŸ§¹ CLEANUP
### â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

### â”â”â” FINAL: DELETE ALL TEST COMPANIES â”â”â”
DELETE {{server}}/companies/{{shoppeId}}
Accept: application/json

###
DELETE {{server}}/companies/{{loggiId}}
Accept: application/json

###
DELETE {{server}}/companies/{{biqueloId}}
Accept: application/json
