<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <include resource="logback-spring-scope.xml"/>
    <include resource="logback-spring-appenders-text.xml"/>
    <include resource="logback-spring-appenders-json.xml"/>

    <if condition='property("LOG_FORMAT").contains("json")'>
        <then>
            <root level="INFO">
                <appender-ref ref="ASYNC_FILE_JSON"/>
                <appender-ref ref="ASYNC_STDOUT_JSON"/>
            </root>
            <logger level="info" name="com.zaxxer.hikari">
                <appender-ref ref="ASYNC_FILE_JSON"/>
                <appender-ref ref="ASYNC_STDOUT_JSON"/>
            </logger>

            <logger level="info" name="io.opentelemetry">
                <appender-ref ref="ASYNC_FILE_JSON"/>
                <appender-ref ref="ASYNC_STDOUT_JSON"/>
            </logger>
        </then>
        <else>
            <root level="info">
                <appender-ref ref="ASYNC_FILE_TEXT"/>
                <appender-ref ref="ASYNC_STDOUT_TEXT"/>
            </root>
            <logger level="debug" name="com.zaxxer.hikari">
                <appender-ref ref="ASYNC_FILE_TEXT"/>
                <appender-ref ref="ASYNC_STDOUT_TEXT" />
            </logger>
        </else>
    </if>
</configuration>